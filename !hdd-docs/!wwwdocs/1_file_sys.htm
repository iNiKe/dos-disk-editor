<html>
<head>
<title>Восстановление информации - Общее описание файловых систем</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<link rel="stylesheet" href="../sStyles.css" type="text/css">
<script language="JavaScript">
<!--
function MM_preloadimages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadimages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_nbGroup(event, grpName) { //v3.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : args[i+1];
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    if ((nbArr = document[grpName]) != null)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = args[i+1];
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link rel="stylesheet" href="../sStyles.css" type="text/css">
</head>

<body bgcolor="#FFCC99" text="#663300" link="#CC6600" alink="#CC6600" vlink="#CC6600" onLoad="MM_preloadimages('../images/recv3.gif','../images/recv2.gif','../images/info3.gif','../images/info2.gif','../images/prog3.gif','../images/prog2.gif','../images/link3.gif','../images/link2.gif','../images/help3.gif','../images/help2.gif')">
<table width="99%" border="0" cellpadding="0" cellspacing="0">
  <tr> 
    <td rowspan="2" bgcolor="#FFFFFF" width="160"> 
      <div align="center"><a href="../www.iatp.ru"><img src="../images/iatp.gif" width="156" height="104" border="0"></a></div>
    </td>
    <td rowspan="2" bgcolor="#FFFFFF" width="10" background="../images/tube_ver.gif">&nbsp;</td>
    <td height="62" bgcolor="#FFFFFF" background="../images/grad_ver.gif" valign="top" align="center" rowspan="2" width="112"> 
      <div align="right"><img src="../images/hdd.gif" width="71" height="105"></div>
    </td>
    <td bgcolor="#FFCC99" background="../images/grad_ver.gif" width="680" height="62"> 
      <div align="right"><img src="../images/title.gif" width="423" height="70"></div>
    </td>
  </tr>
  <tr> 
    <td bgcolor="#FFFFFF" height="41" width="680"> 
      <div align="right"><font face="Arial, Helvetica, sans-serif"><a href="../recovery/1_first.htm" onClick="MM_nbGroup('down','group1','Recov','../images/recv3.gif',1)" onMouseOver="MM_nbGroup('over','Recov','../images/recv2.gif','../images/recv3.gif',1)" onMouseOut="MM_nbGroup('out')"><img name="Recov" src="../images/recv1.gif" border="0" onLoad=""></a><a href="../index.htm" onClick="MM_nbGroup('down','group1','info','../images/info3.gif',1)" onMouseOver="MM_nbGroup('over','info','../images/info2.gif','../images/info3.gif',1)" onMouseOut="MM_nbGroup('out')"><img name="info" src="../images/info1.gif" border="0" onLoad=""></a><a href="../programs/index.htm" onClick="MM_nbGroup('down','group1','progs','../images/prog3.gif',1)" onMouseOver="MM_nbGroup('over','progs','../images/prog2.gif','../images/prog3.gif',1)" onMouseOut="MM_nbGroup('out')"><img name="progs" src="../images/prog1.gif" border="0" onLoad=""></a><a href="../links/index.htm" onClick="MM_nbGroup('down','group1','links','../images/link3.gif',1)" onMouseOver="MM_nbGroup('over','links','../images/link2.gif','../images/link3.gif',1)" onMouseOut="MM_nbGroup('out')"><img name="links" src="../images/link1.gif" border="0" onLoad=""></a><a href="../help/index.htm" onClick="MM_nbGroup('down','group1','help','../images/help3.gif',1)" onMouseOver="MM_nbGroup('over','help','../images/help2.gif','../images/help3.gif',1)" onMouseOut="MM_nbGroup('out')"><img name="help" src="../images/help1.gif" border="0" onLoad=""></a></font></div>
    </td>
  </tr>
  <tr> 
    <td width="160" height="12" class="LeftMenu" valign="top" bgcolor="#FFFFFF"><img src="../images/grad_htt.gif" width="160" height="19"></td>
    <td background="../images/grad_htt.gif" class="LeftMenu" valign="top" width="10" height="12"><img src="../images/tube_crs.gif" width="14" height="19"></td>
    <td background="../images/grad_tub.gif" colspan="2" valign="top" height="12">&nbsp; 
    </td>
  </tr>
  <tr> 
    <td width="160" background="../images/grad_hor.gif" class="LeftMenu" valign="top" bgcolor="#FFFFFF"> 
      <table width="98%" border="0">
        <tr> 
          <td background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle" bgcolor="#FFFFFF"> 
            <p><font face="Arial, Helvetica, sans-serif"><a href="index.htm">Разделы 
              жесткого диска</a></font><a href="../index.htm"><font face="Arial, Helvetica, sans-serif"> 
              </font></a><font face="Arial, Helvetica, sans-serif"> </font></p>
          </td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle"><font face="Arial, Helvetica, sans-serif"><b>Общее 
            описание файловых систем </b> </font></td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle"><font face="Arial, Helvetica, sans-serif"><a href="2_fat32.htm">FAT-32</a></font></td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle"><font face="Arial, Helvetica, sans-serif"><a href="3_ntfs.htm">ntfs</a></font></td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle"><a href="4_FAT_ntfs.htm">Сравнение 
            FAT и ntfs</a></td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="20" class="LeftMenu" valign="middle"> 
            <hr>
          </td>
        </tr>
        <tr> 
          <td width="20%" background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle"><a href="5_hdd.htm">Анатомия 
            жесткого диска</a></td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle"><font face="Arial, Helvetica, sans-serif"><a href="6_raid.htm">RAID-массивы</a></font></td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="20" class="LeftMenu" valign="middle"> 
            <hr>
          </td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle"><a href="7_general.htm">Общее 
            описание интерфейсов жестких дисков</a></td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle"><a href="8_ide.htm">Интерфейс 
            IDE </a></td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle"><a href="9_ata_rags.htm">Сигналы 
            интерфейса ATA и регистры ввода-вывода</a></td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="20" class="LeftMenu" valign="middle"> 
            <hr>
          </td>
        </tr>
        <tr> 
          <td width="13%" background="../images/grad_hor.gif" height="40" class="LeftMenu" valign="middle"><a href="winnt_pswd.htm">Если 
            утерян пароль администратора Win NT (Win 2000)</a></td>
        </tr>
      </table>
    </td>
    <td width="10" background="../images/tube_ver.gif" class="LeftMenu" valign="top" bgcolor="#FFFFFF">&nbsp;</td>
    <td background="../images/hdd_bg.jpg" colspan="2" valign="top"> 
      <blockquote> 
        <p><font face="Arial, Helvetica, sans-serif"><br>
          </font></p>
        <h4><font face="Arial, Helvetica, sans-serif">ОБЩЕЕ ОПИСАНИЕ ФАЙЛОВЫХ 
          СИСТЕМ<br>
          <a href="http://attend.to/vzogin"><font size="2">Copyright © 2000, В.В. 
          Зогин.</font></a> </font><font face="Arial, Helvetica, sans-serif" size="2"><em>Виктор 
          Зогин (<a
href="mailto:vzogin@mail.ru">vzogin@mail.ru</a>)</em></font></h4>
        <h5><font face="Arial, Helvetica, sans-serif" size="2"><a name="Введение">Введение</a></font></h5>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Файловая 
          система (ФС) является важной частью любой операционной системы, которая 
          отвечает за организацию хранения и доступа к информации на каких-либо 
          носителях. Рассмотрим в качестве примера файловые системы для наиболее 
          распространенных в наше время носителей информации – магнитных дисков. 
          Как известно, информация на жестком диске хранится в секторах (обычно 
          512 байт) и само устройство может выполнять лишь команды считать/записать 
          информацию в определенный сектор на диске. В отличие от этого файловая 
          система позволяет пользователю оперировать с более удобным для него 
          понятием - файл. Файловая система берет на себя организацию взаимодействия 
          программ с файлами, расположенными на дисках. Для идентификации файлов 
          используются имена. Современные файловые системы предоставляют пользователям 
          возможность давать файлам достаточно длинные мнемонические названия.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Под 
          каталогом в ФС понимается, с одной стороны, группа файлов, объединенных 
          пользователем исходя из некоторых соображений, с&nbsp; другой стороны 
          каталог - это файл, содержащий системную информацию о группе составляющих 
          его файлов. Файловые системы обычно имеют иерархическую структуру, в 
          которой уровни создаются за счет каталогов, содержащих информацию о 
          файлах и каталогах более низкого уровня.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Рассмотрим 
          более подробно структуру жесткого диска. Базовой единицей жесткого диска 
          является <b>раздел, </b>создаваемый во время разметки жесткого диска. 
          Каждый раздел содержит один том, обслуживаемый какой-либо файловой системой 
          и имеющий таблицу оглавления файлов - корневой каталог. Некоторые операционные 
          системы поддерживают создание томов, охватывающих несколько разделов. 
          Жесткий диск может содержать до четырех основных разделов. Это ограничение 
          связано с характером организации данных на жестких дисках IBM-совместимых 
          компьютеров. Многие операционные системы позволяют создавать, так называемый, 
          <b>расширенный </b>(extended) раздел, который по аналогии с разделами 
          может разбиваться на несколько логических дисков.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          первом физическом секторе жесткого диска располагается головная запись 
          загрузки и таблица разделов (табл.&nbsp;1). <strong>Головная запись 
          загрузки </strong>(<strong>master boot record, MBR</strong>) - первая 
          часть данных на жестком диске. Она зарезервирована для программы начальной 
          загрузки BIOS (<em>ROM Bootstrap routin</em>e), которая при загрузке 
          с жесткого диска считывает и загружает в память первый физический сектор 
          на активном разделе диска, называемый <a name="Boot Sector"><strong>загрузочным 
          сектором (Boot Sector)</strong></a>. Каждая запись в таблице разделов 
          (partition table) содержит начальную позицию и размер раздела на жестком 
          диске, а также информацию о том, первый сектор какого раздела содержит 
          загрузочный сектор.</font></p>
        <div align="center"> 
          <center>
            <table border="1" cellspacing="0" bordercolor="cc6600" cellpadding="0" width="307">
              <tr bgcolor="ffcc99"> 
                <td width="97" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Размер 
                    (байт)</b> </font>
                </td>
                <td width="174" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Описание</b> 
                    </font>
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="97" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">446</font> 
                </td>
                <td width="174" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Загрузочная 
                    запись (MBR)</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="97" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">16</font> 
                </td>
                <td width="174" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Запись 
                    1 раздела</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="97" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">16</font> 
                </td>
                <td width="174" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Запись 
                    2 раздела</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="97" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">16</font> 
                </td>
                <td width="174" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Запись 
                    3 раздела</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="97" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">16</font> 
                </td>
                <td width="174" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Запись 
                    4 раздела</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="97" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">2</font> 
                </td>
                <td width="174" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Сигнатура 
                    055AAh</font> 
                </td>
              </tr>
            </table>
          </center>
        </div>
        <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b><small>Табл. 
          1. Таблица деления диска</small></b></font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          широком смысле понятие &quot;файловая система&quot; включает:</font></p>
        <ul>
          <li><font face="Arial, Helvetica, sans-serif" size="2">совокупность 
            всех файлов на диске,</font></li>
          <li><font face="Arial, Helvetica, sans-serif" size="2">наборы служебных 
            структур данных, используемых для управления файлами, такие как, например, 
            каталоги файлов, дескрипторы файлов, таблицы распределения свободного 
            и занятого пространства на диске,</font></li>
          <li><font face="Arial, Helvetica, sans-serif" size="2">комплекс системных 
            программных средств, реализующих управление файлами, в частности операции 
            по созданию, уничтожению, чтению, записи, именованию файлов, установке 
            атрибутов и уровней доступа, поиску и т.д.</font></li>
        </ul>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Различие 
          между файловыми системами заключается, в основном, в способах распределения 
          пространства между файлами на диске и организации на диске служебных 
          областей.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Современные 
          операционные системы стремятся обеспечить пользователя возможностью 
          работать одновременно с несколькими файловыми системами. В этом случае 
          ФС рассматривается как часть подсистемы ввода-вывода. В большинстве 
          операционных систем (Windows 95, NT, OS/2) реализуется механизм переключения 
          файловых систем (File System Switch, FSS), позволяющий поддерживать 
          различные типы ФС. В соответствии с этим подходом информация о файловых 
          системах и файлах разбивается на две части – зависимую от ФС и не зависимую. 
          FSS обеспечивает интерфейс между ядром и файловой системой, транслируя 
          запросы ядра в операции, зависящие от типа файловой системы. При этом 
          ядро имеет представление только о независимой части ФС.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Файловая 
          система представляет многоуровневую структуру, на верхнем уровне которой 
          располагается так называемый переключатель файловых систем (в Windows, 
          такой переключатель называется устанавливаемым диспетчером файловой 
          системы - installable filesystem manager, IFS). Он обеспечивает интерфейс 
          между приложением и конкретной файловой системой, к которой обращается 
          приложение. Переключатель файловых систем преобразует запросы к файлам 
          в формат, воспринимаемый следующим уровнем - уровнем драйверов файловых 
          систем. Для выполнения своих функций драйверы файловых систем обращаются 
          к драйверам конкретных устройств хранения информации.</font></p>
        <p align="CENTER">&nbsp;</p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Клиент-серверные 
          приложения предъявляют повышенные требования к производительности файловых 
          систем. Современные файловые системы должны обеспечивать эффективный 
          доступ к файлам, поддержку носителей данных достаточно большого объема, 
          защиту от несанкционированного доступа к данным и сохранение целостности 
          данных. Под целостностью данных подразумевается способность ФС обеспечивать 
          отсутствие ошибок и нарушений согласованности в данных, а также восстанавливать 
          поврежденные данные.</font></p>
        <h5 align="left"><font face="Arial, Helvetica, sans-serif" size="2"><b><a name="FAT">FAT</a></b></font></h5>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Файловая 
          система FAT (File Allocation Table) была разработана Биллом Гейтсом 
          и Марком МакДональдом в 1977 году и первоначально использовалась в операционной 
          системе 86-DOS. Чтобы добиться переносимости программ из операционной 
          системы CP/M в 86-DOS, в ней были сохранены ранее принятые ограничения 
          на имена файлов. В дальнейшем 86-DOS была приобретена Microsoft и стала 
          основой для ОС MS-DOS&nbsp;1.0, выпущенной в августе 1981 года. FAT 
          была предназначена для работы с гибкими дисками размером менее 1 Мбайта, 
          и вначале не предусматривала поддержки жестких дисков. В настоящее время 
          FAT поддерживает файлы и разделы размеров до 2 Гбайт.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          FAT применяются следующие соглашения по именам файлов: </font></p>
        <ul>
          <ul>
            <li><font face="Arial, Helvetica, sans-serif" size="2">имя должно 
              начинаться с буквы или цифры и может содержать любой символ ASCII, 
              за исключением пробела и символов &quot;/\[]:;|=,^*?</font></li>
            <li><font face="Arial, Helvetica, sans-serif" size="2">Длина имени 
              не превышает 8 символов, за ним следует точка и необязательное расширение 
              длиной до 3 символов.</font></li>
          </ul>
        </ul>
        <ul>
          <ul>
            <li><font face="Arial, Helvetica, sans-serif" size="2">регистр символов 
              в именах файлов не различается и не сохраняется.</font></li>
          </ul>
        </ul>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Структура 
          раздела FAT изображена на рисунке 2. В блоке параметров BIOS содержится 
          необходимая BIOS информация о физических характеристиках жесткого диска. 
          Файловая система FAT не может контролировать отдельно каждый сектор, 
          поэтому она объединяет смежные сектора в <strong>кластеры</strong> (<strong>clusters</strong>). 
          Таким образом, уменьшается общее количество единиц хранения, за которыми 
          должна следить файловая система. Размер кластера в FAT является степенью 
          двойки и определяется размером тома при форматировании диска (табл. 
          2). Кластер представляет собой минимальное пространство, которое может 
          занимать файл. Это приводит к тому, что часть пространства диска расходуется 
          впустую. В состав операционной системы входят различные утилиты (DoubleSpace, 
          DriveSpace), предназначенные для уплотнения данных на диске.</font></p>
        <div align="center"> 
          <center>
            <table border="1" cellspacing="0" bordercolor="cc6600" cellpadding="0" width="515" align="center">
              <tr> 
                <td width="33%" valign="MIDDLE" bgcolor="#FFFFFF"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Загрузочный 
                    сектор</font></p>
                  <p align="CENTER"> <font face="Arial, Helvetica, sans-serif" size="2">Блок 
                    параметров BIOS (BPB)</font> 
                </td>
                <td width="10%" valign="MIDDLE" bgcolor="ffcc99"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">FAT</font> 
                </td>
                <td width="11%" valign="MIDDLE" bgcolor="ffcc99"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">FAT<br>
                    (копия)</font> 
                </td>
                <td width="24%" valign="MIDDLE"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Корневой 
                    каталог</font> 
                </td>
                <td width="22%" valign="MIDDLE"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Область 
                    файлов</font> 
                </td>
              </tr>
            </table>
          </center>
        </div>
        <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b><small>Рис. 
          2</small></b></font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Свое 
          название FAT получила от одноименной таблицы размещения файлов. В таблице 
          размещения файлов хранится информация о кластерах логического диска. 
          Каждому кластеру в FAT соответствует отдельная запись, которая показывает, 
          свободен ли он, занят ли данными файла, или помечен как сбойный (испорченный). 
          Если кластер занят под файл, то в соответствующей записи в таблице размещения 
          файлов указывается адрес кластера, содержащего следующую часть файла. 
          Из-за этого FAT называют файловой системой со связанными списками. Оригинальная 
          версия FAT, разработанная для DOS 1.00, использовала 12-битную таблицу 
          размещения файлов и поддерживала разделы объемом до 16 Мб (в DOS можно 
          создать не более двух разделов FAT). Для поддержки жестких дисков размером 
          более 32 Мб разрядность FAT была увеличена до 16 бит, а размер кластера 
          - до 64 секторов (32 Кб). Так как каждому кластеру может быть присвоен 
          уникальный 16-разрядный номер, то FAT поддерживает максимально 2<sup>16</sup>, 
          или 65536 кластеров на одном томе. </font></p>
        <div align="center"> 
          <center>
            <table border="1" cellspacing="0" bordercolor="cc6600" cellpadding="0" width="435" align="center">
              <tr bgcolor="ffcc99"> 
                <td width="35%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Размер 
                    раздела</b> </font>
                </td>
                <td width="26%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Размер 
                    кластера</b> </font>
                </td>
                <td width="39%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Тип 
                    FAT</b> </font>
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="35%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">&lt; 
                    16 Мб</font> 
                </td>
                <td width="26%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">4 
                    Кб</font> 
                </td>
                <td width="39%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">FAT12</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="35%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">16 
                    Мб – 127 Мб</font> 
                </td>
                <td width="26%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">2 
                    Кб</font> 
                </td>
                <td width="39%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">FAT16</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="35%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">128 
                    Мб – 255 Мб</font> 
                </td>
                <td width="26%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">4 
                    Кб</font> 
                </td>
                <td width="39%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">FAT16</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="35%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">256 
                    Мб – 511 Мб</font> 
                </td>
                <td width="26%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">8 
                    Кб</font> 
                </td>
                <td width="39%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">FAT16</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="35%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">512 
                    Мб – 1023 Мб</font> 
                </td>
                <td width="26%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">16 
                    Кб</font> 
                </td>
                <td width="39%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">FAT16</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="35%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">1 
                    Гб – 2 Гб</font> 
                </td>
                <td width="26%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">32 
                    Кб</font> 
                </td>
                <td width="39%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">FAT16</font> 
                </td>
              </tr>
            </table>
          </center>
        </div>
        <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b><small>Табл. 
          2</small></b></font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Поскольку 
          загрузочная запись слишком мала для хранения алгоритма поиска системных 
          файлов на диске, то системные файлы должны находиться в определенном 
          месте, чтобы загрузочная запись могла их найти. Фиксированное положение 
          системных файлов в начале области данных накладывает жесткое ограничение 
          на размеры корневого каталога и таблицы размещения файлов. Вследствие 
          этого общее число файлов и подкаталогов в корневом каталоге на диске 
          FAT ограничено 512. </font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Каждому 
          файлу и подкаталогу в FAT соответствует 32-байтный элемент каталога 
          (directory entry), содержащий имя файла, его атрибуты (архивный, скрытый, 
          системный и “только для чтения”), дату и время создания (или внесения 
          в него последних изменений), а также прочую информацию (табл. 3).</font></p>
        <div align="center"> 
          <center>
            <table border="1" cellspacing="0" cellpadding="0" width="330" align="center" bordercolor="cc6600">
              <tr bgcolor="ffcc99"> 
                <td width="185" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Содержание</b> 
                    </font>
                </td>
                <td width="109" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Размер 
                    (байт)</b> </font>
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="185" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Имя 
                    файла </font> 
                </td>
                <td width="109" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">8</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="185" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Расширение</font> 
                </td>
                <td width="109" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">3</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="185" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Байт 
                    атрибутов</font> 
                </td>
                <td width="109" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">1</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="185" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Зарезервировано</font> 
                </td>
                <td width="109" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">10</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="185" valign="TOP" height="4"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Время</font> 
                </td>
                <td width="109" valign="TOP" height="4"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">2</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="185" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Дата</font> 
                </td>
                <td width="109" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">2</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="185" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Номер 
                    начального кластера с данными</font> 
                </td>
                <td width="109" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">2</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="185" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Размер 
                    файла</font> 
                </td>
                <td width="109" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">4</font> 
                </td>
              </tr>
            </table>
          </center>
        </div>
        <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b><small>Табл. 
          3. Элемент каталога</small></b></font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Файловая 
          система FAT всегда заполняет свободное место на диске последовательно 
          от начала к концу. При создании нового файла или увеличении уже существующего 
          она ищет самый первый свободный кластер в таблице размещения файлов. 
          Если в процессе работы одни файлы были удалены, а другие изменились 
          в размере, то появляющиеся в результате пустые кластеры будут рассеяны 
          по диску. Если кластеры, содержащие данные файла, расположены не подряд, 
          то файл оказывается <b>фрагментированным</b>. Сильно фрагментированные 
          файлы значительно снижают эффективность работы, так как головки чтения/записи 
          при поиске очередной записи файла должны будут перемещаться от одной 
          области диска к другой. В состав операционных систем, поддерживающих 
          FAT, обычно входят специальные утилиты дефрагментации диска, предназначенные 
          повысить производительность файловых операций.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Еще 
          один недостаток FAT заключается в том, что ее производительность сильно 
          зависит от количества файлов, хранящихся в одном каталоге. При большом 
          количестве файлов (около тысячи), выполнение операции считывания списка 
          файлов в каталоге может занять несколько минут. Это обусловлено тем, 
          что в FAT каталог имеет линейную неупорядоченную структуру, и имена 
          файлов в каталогах идут в порядке их создания. В результате, чем больше 
          в каталоге записей, тем медленнее работают программы, так как при поиске 
          файла требуется просмотреть последовательно все записи в каталоге.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Поскольку 
          FAT изначально проектировалась для однопользовательской операционной 
          системы DOS, то она не предусматривает хранения такой информации, как 
          сведения о владельце или полномочия доступа к файлу/каталогу.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">FAT 
          является наиболее распространенной файловой системой и ее в той или 
          иной степени поддерживают большинство современных ОС. Благодаря своей 
          универсальности FAT может применяться на томах, с которыми работают 
          разные операционные системы.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Хотя 
          нет никаких препятствий использовать при форматировании дискет любую 
          другую файловую систему, большинство ОС для совместимости используют 
          FAT. Отчасти это можно объяснить тем, что простая структура FAT требует 
          меньше места для хранения служебных данных, чем остальные системы. Преимущества 
          других файловых систем становятся заметны только при использовании их 
          на носителях объемом более 100 Мб.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Надо 
          отметить, что FAT - простая файловая система, не предотвращающая порчи 
          файлов из-за ненормального завершения работы компьютера. В состав операционных 
          систем, поддерживающих FAT, входят специальные утилиты проверяющие структуру 
          и корректирующие несоответствия в файловой системе.</font></p>
        <h5 align="left"><font face="Arial, Helvetica, sans-serif" size="2"><b><a name="HPFS">HPFS</a></b></font></h5>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Высокопроизводительная 
          файловая система HPFS (High Performance File System) была представлена 
          фирмой IBM в 1989 году вместе с операционной системой OS/2 1.20. Файловая 
          система HPFS также поддерживалась ОС Windows NT до версии 3.51 включительно. 
          По производительности эта ФС существенно опережает FAT. HPFS позволяет 
          использовать жесткие диски объемом до 2 Терабайт (первоначально до 4 
          Гбайт). Кроме того, она поддерживает разделы диска размером до 512 Гб 
          и позволяет использовать имена файлов длиной до 255 символов (на каждый 
          символ при этом отводится 2 байта). В HPFS по сравнению с FAT уменьшено 
          время доступа к файлам в больших каталогах. </font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">HPFS 
          распределяет пространство на диске не кластерами как в FAT, а физическими 
          секторами по 512 байт, что не позволяет ее использовать на жестких дисках, 
          имеющих другой размер сектора. Эти секторы принято называть блоками. 
          Чтобы уменьшить фрагментацию диска, при распределении пространства под 
          файл HPFS стремится, по возможности, размещать файлы в последовательных 
          смежных секторах. Фрагмент файла, располагающийся в смежных секторах, 
          называется <b>экстентом</b>.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Для 
          нумерации единиц распределения пространства диска HPFS использует 32 
          разряда, что дает 2<sup>32</sup>, или более 4 миллиардов номеров. Однако 
          HPFS использует числа со знаком, что сокращает число возможных номеров 
          блоков до 2 миллиардов. Помимо стандартных атрибутов файла, HPFS поддерживает 
          <b>расширенные атрибуты </b>файла (Extended Attributes, EA), которые 
          могут содержать до 64 Кб различных дополнительных сведений о файле.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Диск 
          HPFS имеет следующие три базовые структуры (рис. 3): загрузочный блок 
          (<strong>BootBlock</strong>), дополнительный блок (<strong>SuperBlock</strong>) 
          и резервный блок (<strong>SpareBlock</strong>).</font></p>
        <div align="center"> 
          <center>
            <table border="1" cellspacing="0" bordercolor="cc6600" cellpadding="0" width="100%">
              <tr> 
                <td width="9%" valign="MIDDLE" bgcolor="#ffffff" height="103"> 
                  <p
    align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Загрузочный 
                    блок</font> 
                </td>
                <td width="9%" valign="MIDDLE" bgcolor="#ffffff" height="103"> 
                  <p
    align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Дополнительный 
                    блок</font> 
                </td>
                <td width="9%" valign="MIDDLE" bgcolor="#ffffff" height="103"> 
                  <p
    align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Резервный 
                    блок</font> 
                </td>
                <td width="9%" valign="MIDDLE" bgcolor="ffcc99" height="103"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Группа 
                    1</font> 
                </td>
                <td width="9%" valign="MIDDLE" bgcolor="ffcc99" height="103"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Битовая 
                    карта группы 1</font> 
                </td>
                <td width="9%" valign="MIDDLE" height="103"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Битовая 
                    карта группы 2</font> 
                </td>
                <td width="9%" valign="MIDDLE" height="103"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Группа 
                    2</font> 
                </td>
                <td width="9%" valign="MIDDLE" bgcolor="ffcc99" height="103"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Группа 
                    3</font> 
                </td>
                <td width="9%" valign="MIDDLE" bgcolor="ffcc99" height="103"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Битовая 
                    карта группы 3</font> 
                </td>
                <td width="9%" valign="MIDDLE" height="103"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Битовая 
                    карта группы 4</font> 
                </td>
                <td width="9%" valign="MIDDLE" height="103"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">Группа 
                    4</font> 
                </td>
              </tr>
            </table>
          </center>
        </div>
        <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b><small>Рис. 
          3. Дисковый раздел HPFS</small></b></font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2"><strong><em>Загрузочный 
          блок</em></strong> в HPFS аналогичен загрузочному блоку в FAT. Он располагается 
          в секторах с 0 по 15 и занимает на диске 8 Кб. Системные файлы, также 
          как и в FAT, располагаются в корневом каталоге, но при этом физически 
          могут находиться в любом месте на диске.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          16 секторе размещается <em><strong>дополнительный блок</strong></em>, 
          содержащий указатель на <strong>список блоков битовых карт </strong>(bitmap 
          block list). В этом списке перечислены все блоки на диске, в которых 
          расположены битовые карты, используемые для обнаружения свободных секторов. 
          Также в дополнительном блоке хранится указатель на список дефектных 
          блоков (bad block list), указатель на группу каталогов (directory band), 
          указатель на файловый узел корневого каталога и дата последней проверки 
          диска. Файловый узел (fnode) – это структура диска HPFS, которая содержит 
          информацию о расположении файла и о его расширенных атрибутах. </font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          следующем секторе находится <strong><em>резервный блок</em></strong>, 
          содержащий карту аварийного замещения (hotfix map), указатель на список 
          свободных запасных блоков (directory emergency free block list) и ряд 
          системных флагов. Резервный блок обеспечивает высокую отказоустойчивость 
          HPFS и позволяет восстанавливать поврежденные данные на диске.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Остальное 
          пространство диска разделено на <b>группы </b>(band) хранения данных. 
          Каждая группа занимает 8 Мб и имеет свою собственную битовую карту свободного 
          пространства, которая похожа на таблицу размещения файлов FAT. Каждому 
          сектору группы соответствует один бит к ее битовой карте, показывающий 
          занят ли соответствующий сектор. Битовые карты двух групп располагаются 
          на диске рядом, также как располагаются и сами группы. Это дает возможность 
          непрерывно разместить на жестком диске файл размером до 16 Мб.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Одна 
          из групп данных размером 8 Мб, расположенная в середине жесткого диска 
          и называемая <b>группой каталогов, </b>хранит информацию о каталогах 
          диска. В ней наряду с остальными каталогами располагается и корневой 
          каталог. Расположение группы каталогов в центре диска значительно сокращает 
          время позиционирования головок чтения/записи.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          отличие от линейной структуры FAT, структура каталога в HPFS представляет 
          собой сбалансированное дерево (так называемое B-дерево) с записями, 
          расположенными в алфавитном порядке. Сбалансированное дерево состоит 
          из корневого (root block) и оконечных блоков (leaf block). Блоки занимают 
          4 последовательных сектора и в среднем могут содержать 40 записей. Каждая 
          запись корневого блока указывает на один из оконечных блоков (если только 
          в каталоге не меньше 40 файлов); в свою очередь, каждая запись в оконечном 
          блоке указывает на файловый узел файла или на оконечный блок следующего 
          уровня. Таким образом, двухуровневая структура может содержать 40 оконечных 
          блоков по 40 записей в каждом и описывать до 1600 файлов. При поиске 
          файловая система HPFS просматривает только необходимые ветви дерева.</font></p>
        <p align="left"><font face="Arial, Helvetica, sans-serif" size="2">Файловый 
          узел имеет размер 512 байт и всегда по возможности располагается непосредственно 
          перед первым блоком своего файла. Каждый файл и каталог диска HPFS имеет 
          свой файловый узел. Информация, хранящаяся в файловом узле, включает 
          в себя расширенные атрибуты файла, если они достаточно малы, чтобы поместится 
          в один сектор диска, и сокращенное имя файла в формате 8.3. Если расширенные 
          атрибуты не помещаются в файловый узел, то в него записывается указатель 
          на них. Положение файла на диске описывается в файловом узле двумя 32-битными 
          числами. Первое из чисел представляет собой указатель на первый блок 
          файла, а второе - длину экстента. Если же файл фрагментирован, то его 
          размещение описывается дополнительными парами 32-битных чисел. В файловом 
          узле можно хранить информацию максимум о 8 экстентах файла. Если файл 
          имеет больше число экстентов, то в его файловый узел записывается указатель 
          на блок размещения (allocation block), который может содержать до 40 
          указателей на экстенты или на другие блоки размещения. Таким образом, 
          двухуровневая структура блоков размещения может хранить информацию о 
          480 (12*40) секторах, что теоретически, позволяет работать с файлами 
          размером до 7.68 Гб (12*40*16 Мб). </font></p>
        <h4 align="left"><font face="Arial, Helvetica, sans-serif" size="2"><b><a name="VFAT">VFAT</a></b></font></h4>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Файловая 
          система VFAT (Virtual FAT), реализованная в Windows NT 3.5, Windows 
          95 (DOS&nbsp;7.0), - это файловая система <a href="#FAT">FAT</a>, включающая 
          поддержку длинных имен файлов (Long File Name, LFN) в кодировке UNICODE 
          (каждый символ имени кодируется 2 байтами). VFAT использует ту же самую 
          схему распределения дискового пространства, что и файловая система FAT, 
          поэтому размер кластера определяется величиной раздела.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          VFAT ослаблены ограничения, устанавливаемые соглашениями по именам файлов 
          FAT:</font></p>
        <ul>
          <ul>
            <li><font face="Arial, Helvetica, sans-serif" size="2">имя может быть 
              длиной до 255 символов.</font></li>
            <li><font face="Arial, Helvetica, sans-serif" size="2">в имя можно 
              включать несколько пробелов и точек, однако, текст после последней 
              точки рассматривается как расширение.</font></li>
          </ul>
        </ul>
        <ul>
          <ul>
            <li><font face="Arial, Helvetica, sans-serif" size="2">регистр символов 
              в именах не различается, <b>но </b>сохраняется.</font></li>
          </ul>
        </ul>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Основной 
          задачей при разработке VFAT была необходимость корректной работы старых 
          программ, не поддерживающих длинные имена файлов. Как правило, прикладные 
          программы для доступа к файлам используют функции ОС. Если у элемента 
          каталога установить “нереальную” комбинацию битов атрибутов: “только 
          для чтения”, “скрытый”, “системный”, “метка тома” – то любые файловые 
          функции старых версий DOS и Windows не заметят такого элемента каталога. 
          В итоге для каждого файла и подкаталога в VFAT хранится два имени: длинное 
          и короткое в формате 8.3 для совместимости со старыми программами. Длинные 
          имена (LFN) хранятся в специальных записях каталога, байт атрибутов, 
          у которых равен 0Fh. Для любого файла или подкаталога непосредственно 
          перед единственной записью каталога с его именем в формате 8.3 находится 
          группа из одной или нескольких записей, представляющих длинное имя. 
          Каждая такая запись содержит часть длинного имени файла не более 13 
          символов, из всех таких записей ОС составляет полное имя файла. Поскольку 
          одно длинное имя файла может занимать до 21 записи, а корневой каталог 
          FAT ограничен 512 записями, желательно ограничить использование длинных 
          имен в корневом каталоге.</font></p>
        <div align="center"> 
          <center>
            <table border="1" cellspacing="0" cellpadding="0" width="369" align="center" bordercolor="cc6600">
              <tr bgcolor="ffcc99"> 
                <td width="72%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Содержание</b> 
                    </font>
                </td>
                <td width="28%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Размер 
                    (байт)</b> </font>
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="72%" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Порядок 
                    следования</font> 
                </td>
                <td width="28%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">1</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="72%" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Первые 
                    пять символов LFN</font> 
                </td>
                <td width="28%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">10</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="72%" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Байт 
                    атрибутов (0Fh)</font> 
                </td>
                <td width="28%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">1</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="72%" valign="TOP" height="4"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Указатель 
                    типа (всегда 0)</font> 
                </td>
                <td width="28%" valign="TOP" height="4"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">1</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="72%" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Контрольная 
                    сумма части имени</font> 
                </td>
                <td width="28%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">1</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="72%" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Следующие 
                    шесть символов LFN</font> 
                </td>
                <td width="28%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">12</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="72%" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Номер 
                    начального кластера (всегда 0)</font> 
                </td>
                <td width="28%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">2</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="72%" valign="TOP"> 
                  <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Следующие 
                    два символа LFN</font> 
                </td>
                <td width="28%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">4</font> 
                </td>
              </tr>
            </table>
          </center>
        </div>
        <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b><small>Табл. 
          4. Элемент каталога для длинного имени</small></b></font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Короткое 
          имя генерируется файловой системой автоматически в формате 8.3. Для 
          создания коротких имен (псевдонимов) файлов используется следующий <a name="алгоритм">алгоритм</a>:</font></p>
        <ol>
          <li><font face="Arial, Helvetica, sans-serif" size="2">Из длинного имени 
            удалить все символы не допустимые в именах FAT. Удалить точки в конце 
            и начале имени. После этого удалить все точки, находящиеся внутри 
            имени кроме последней.</font></li>
          <li><font face="Arial, Helvetica, sans-serif" size="2">Обрезать строку, 
            расположенную перед точкой, до 6 символов и добавить в ее конец &quot;~1&quot;. 
            Обрезать строку за точкой до 3 символов.</font></li>
          <li><font face="Arial, Helvetica, sans-serif" size="2">Полученные буквы 
            преобразовать в прописные. Если сгенерированное имя совпадает с уже 
            существующим, то увеличить число в строке &quot;~1&quot;. </font></li>
        </ol>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Данный 
          алгоритм зависит от версии операционной системы и в будущих версиях 
          <a
href="#note1">может меняться</a>.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Редактирование 
          файлов программами, не поддерживающими длинные имена файлов, может приводить 
          к потере длинных имен. Windows обнаруживает подобные элементы каталога, 
          так как их контрольная сумма не соответствует больше тому, что записано 
          в последующей записи каталога в формате 8.3. Однако такие записи не 
          удаляются системой автоматически, они занимают дисковое пространство, 
          до тех пор, пока вы не запустите программу ScanDisk, входящую в состав 
          операционной системы. Большинство старых дисковых утилит воспримут записи, 
          соответствующие длинным именам, как ошибки логической структуры диска. 
          Попытки использовать данные утилиты, в лучшем случае приведет к потере 
          длинных имен, а в худшем - к потере информации на диске.</font></p>
        <h5 align="left"><font face="Arial, Helvetica, sans-serif" size="2"><b><a name="FAT 32">FAT 
          32</a></b></font></h5>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          настоящее время появляются новые поколения жестких дисков, имеющие все 
          бoльшие объемы дискового пространства, в то время как возможности FAT 
          уже достигли своего предела (FAT может поддерживать разделы размером 
          до 2 Гб).</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">FAT32 
          - усовершенствованная версия файловой системы VFAT, поддерживающая жесткие 
          диски объемом до 2 терабайт. Впервые файловая система FAT32 была включена 
          в состав ОС Windows &nbsp;95 OSR&nbsp;2. В FAT32 были расширены атрибуты 
          файлов, позволяющие теперь хранить время и дату создания, модификации 
          и последнего доступа к файлу или каталогу.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Из-за 
          требования совместимости с ранее созданными программами структура FAT32 
          содержит минимальные изменения. Главные отличия от предыдущих версий 
          FAT состоят в следующем. Блок начальной загрузки на разделах с FAT32 
          был увеличен до 2 секторов и включает в себя резервную копию загрузочного 
          сектора, что позволяет системе быть более устойчивой к возможным сбоям 
          на диске. Объем, занимаемый таблицей размещения файлов, увеличился, 
          поскольку теперь каждая запись в ней занимает 32 байта, и общее число 
          кластеров на разделе FAT32 больше, чем на разделах FAT. Соответственно, 
          выросло и количество зарезервированных секторов.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Необходимо 
          отметить, что официально Microsoft не поддерживает разделы FAT32 объемом 
          менее 512 Мб. Однако в версии утилиты FDISK, поставляемой вместе с OSR2, 
          имеется недокументированный флаг /FPRMT, позволяющий отформатировать 
          под FAT32 разделы объемом менее 512 Мб. Microsoft также не поддерживает 
          FAT32-разделы с размером кластера меньшим, чем 4&nbsp;Кб. Размеры кластера, 
          предлагаемые по умолчанию при форматировании FAT32 дисков, приведены 
          в таблице 5. Параметр /Z утилиты FORMAT позволяет самостоятельно установить 
          размер кластера на разделе FAT32: FORMAT &lt;диск&gt; /Z:n, где n – 
          число секторов в кластере.</font></p>
        <div align="center"> 
          <center>
            <table border="1" cellspacing="0" cellpadding="0" width="330" align="center" bordercolor="cc6600">
              <tr bgcolor="ffcc99"> 
                <td width="49%" valign="TOP"> 
                  <p
    align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Размер 
                    раздела</b></font> 
                </td>
                <td width="51%" valign="TOP"> 
                  <p
    align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Размер 
                    кластера</b></font> 
                </td>
              </tr>
              <tr> 
                <td width="49%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">&lt; 
                    260 Мб</font> 
                </td>
                <td width="51%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">512 
                    байт</font> 
                </td>
              </tr>
              <tr> 
                <td width="49%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">260 
                    Мб – 8 Гб</font> 
                </td>
                <td width="51%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">4 
                    Кб</font> 
                </td>
              </tr>
              <tr> 
                <td width="49%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">8 
                    Гб – 16 Гб</font> 
                </td>
                <td width="51%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">8 
                    Кб</font> 
                </td>
              </tr>
              <tr> 
                <td width="49%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">16 
                    Гб – 32 Гб</font> 
                </td>
                <td width="51%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">16 
                    Кб</font> 
                </td>
              </tr>
              <tr> 
                <td width="49%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">&gt; 
                    32 Гб</font> 
                </td>
                <td width="51%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">32 
                    Кб</font> 
                </td>
              </tr>
            </table>
          </center>
        </div>
        <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b><small>Табл. 
          5</small></b></font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Корневой 
          каталог в FAT32 больше не располагается в определенном месте, вместо 
          этого в блоке BPB хранится указатель на начальный кластер корневого 
          каталога. В результате снимается ранее существовавшее ограничение на 
          число записей в корневом каталоге. </font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Кроме 
          того, для учета свободных кластеров, в зарезервированной области на 
          разделе FAT32 имеется сектор, содержащий число свободных кластеров и 
          номер самого последнего использованного кластера. Это позволяет системе 
          при выделении следующего кластера не перечитывать заново всю таблицу 
          размещения файла.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          данный момент FAT32 поддерживается в следующих ОС: Windows 95 OSR2, 
          Windows 98 и Windows NT 5.0.</font></p>
        <h5 align="left"><font face="Arial, Helvetica, sans-serif" size="2"><b><a name="ntfs">ntfs</a></b></font></h5>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">ntfs 
          (New Technology File System) - наиболее предпочтительная файловая система 
          при работе с ОС Windows&nbsp;NT, поскольку она была специально разработана 
          для данной системы. В состав Windows NT входит утилита convert, осуществляющая 
          конвертирование томов с FAT и HPFS в тома ntfs. В ntfs значительно расширены 
          возможности по управлению доступом к отдельным файлам и каталогам, введено 
          большое число атрибутов, реализована отказоустойчивость, средства динамического 
          сжатия файлов, поддержка требований стандарта POSIX. ntfs позволяет 
          использовать имена файлов длиной до 255 символов, при этом она <a href="#note2">использует</a> 
          тот же алгоритм для генерации короткого имени, что и VFAT. ntfs обладает 
          возможностью самостоятельного восстановления в случае сбоя ОС или оборудования, 
          так что дисковый том остается доступным, а структура каталогов не нарушается.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Каждый 
          файл на томе ntfs представлен записью в специальном файле – главной 
          файловой таблице <strong>MFT</strong> (<strong>Master File Table</strong>). 
          ntfs резервирует первые 16 записей таблицы размером около 1 Мб для специальной 
          информации. Первая запись таблицы описывает непосредственно саму главную 
          файловую таблицу. За ней следует зеркальная запись MFT. Если первая 
          запись MFT разрушена, ntfs считывает вторую запись, чтобы отыскать зеркальный 
          файл MFT, первая запись которого идентична первой записи MFT. Местоположение 
          сегментов данных MFT и зеркального файла MFT хранится в секторе начальной 
          загрузки. Копия сектора начальной загрузки находится в логическом центре 
          диска. Третья запись MFT содержит файл регистрации, применяемый для 
          восстановления файлов. Семнадцатая и последующие записи главной файловой 
          таблицы используются собственно файлами и каталогами на томе.</font></p>
        <p align="left"><font face="Arial, Helvetica, sans-serif" size="2">В журнале 
          транзакций (log file) регистрируются все операции, влияющие на структуру 
          тома, включая создание файла и любые команды, изменяющие структуру каталогов. 
          Журнал транзакций применяется для восстановления тома ntfs после сбоя 
          системы. Запись для корневого каталога содержит список файлов и каталогов, 
          хранящихся в корневом каталоге.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Схема 
          распределения пространства на томе хранится в файле битовой карты (bitmap 
          file). Атрибут данных этого файла содержит битовую карту, каждый бит 
          которой представляет один кластер тома и указывает, свободен ли данный 
          кластер или занят некоторым файлом.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          загрузочном файле (boot file) хранится код начального загрузчика Windows 
          NT.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">ntfs 
          также поддерживает файл плохих кластеров (bad cluster file) для регистрации 
          поврежденных участков на томе и файл тома (volume file), содержащий 
          имя тома, версию ntfs и бит, который устанавливается при повреждении 
          тома. Наконец, имеется файл, содержащий таблицу определения атрибутов 
          (attribute definition table), которая задает типы атрибутов, поддерживаемые 
          на томе, и указывает можно ли их индексировать, восстанавливать операцией 
          восстановления системы и т.д.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">ntfs 
          распределяет пространство кластерами и использует для их нумерации 64 
          разряда, что дает возможность иметь 2<sup>64</sup> кластеров, каждый 
          размером до 64 Кбайт. Как и в FAT размер кластера может меняться, но 
          необязательно возрастает пропорционально размеру диска. Размеры кластеров, 
          устанавливаемые по умолчанию при форматировании раздела, приведены в 
          табл. 6.</font></p>
        <div align="center"> 
          <center>
            <table border="1" cellspacing="0" bordercolor="cc6600" cellpadding="0" width="325" align="center">
              <tr bgcolor="ffcc99"> 
                <td width="63%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Размер 
                    раздела</b> </font>
                </td>
                <td width="37%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b>Размер 
                    кластера</b> </font>
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="63%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">&lt; 
                    512 Мб</font> 
                </td>
                <td width="37%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">512 
                    байт</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="63%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">513 
                    Мб - 1024 Мб (1 Гб)</font> 
                </td>
                <td width="37%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">1 
                    Кб</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="63%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">1 
                    Гб - 2 Гб</font> 
                </td>
                <td width="37%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">2 
                    Кб</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="63%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">2 
                    Гб - 4 Гб</font> 
                </td>
                <td width="37%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">4 
                    Кб</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="63%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">4 
                    Гб - 8 Гб</font> 
                </td>
                <td width="37%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">8 
                    Кб</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="63%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">8 
                    Гб - 16 Гб</font> 
                </td>
                <td width="37%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">16 
                    Кб</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="63%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">16 
                    Гб - 32 Гб</font> 
                </td>
                <td width="37%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">32 
                    Кб</font> 
                </td>
              </tr>
              <tr bgcolor="#FFFFFF"> 
                <td width="63%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">&gt; 
                    32 Гб</font> 
                </td>
                <td width="37%" valign="TOP"> 
                  <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2">64 
                    Кб</font> 
                </td>
              </tr>
            </table>
          </center>
        </div>
        <p align="CENTER"><font face="Arial, Helvetica, sans-serif" size="2"><b><small>Табл. 
          6</small></b></font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">ntfs 
          позволяет хранить файлы размером до 16 эксабайт (2<sup>64</sup> байт) 
          и располагает встроенным средством уплотнения файлов в реальном времени. 
          Сжатие является одним из атрибутов файла или каталога и подобно любому 
          атрибуту может быть снято или установлено в любой момент (сжатие возможно 
          на разделах с размером кластера не более 4 Кб). При уплотнении файла, 
          в отличие от схем уплотнения используемых в FAT, применяется пофайловое 
          уплотнение, таким образом, порча небольшого участка диска не приводит 
          к потере информации в других файлах.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Для 
          уменьшения фрагментации ntfs всегда пытается сохранить файлы в непрерывных 
          блоках. Эта система использует структуру каталогов в виде B-дерева, 
          аналогичную высокопроизводительной файловой системе <a
href="#HPFS">HPFS</a>, а не структуре со связанным списком применяемой в FAT. 
          Благодаря этому поиск файлов в каталоге осуществляется быстрее, поскольку 
          имена файлов хранятся сортированными в лексикографическом порядке.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">ntfs 
          была разработана как восстанавливаемая файловая система, использующая 
          модель обработки транзакций. Каждая операция ввода-вывода, изменяющая 
          файл на томе ntfs, рассматривается системой как транзакция и может выполняться 
          как неделимый блок. При модификации файла пользователем сервис файла 
          регистрации фиксирует всю информацию необходимую для повторения или 
          отката транзакции. Если транзакция завершена успешно, производится модификация 
          файла. Если нет, ntfs производит откат транзакции.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Несмотря 
          на наличие защиты от несанкционированного доступа к данным ntfs не обеспечивает 
          необходимую &nbsp; конфиденциальность хранимой информации. Для получения 
          доступа к файлам достаточно загрузить компьютер в DOS с дискеты и воспользоваться 
          каким-нибудь сторонним драйвером ntfs для этой системы. </font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Начиная 
          с версии Windows NT 5.0 (новое название Windows 2000) Microsoft поддерживает 
          новую файловую систему <a name="ntfs 5.0" href="#note2"><strong>ntfs 
          5.0</strong></a>. В новой версии ntfs были введены дополнительные атрибуты 
          файлов; наряду с правом доступа введено понятие запрета доступа, позволяющее, 
          например, при наследовании пользователем прав группы на какой-нибудь 
          файл, запретить ему возможность изменять его содержимое. Новая система 
          также позволяет:</font></p>
        <ul>
          <li><font face="Arial, Helvetica, sans-serif" size="2">вводить ограничения 
            (квоты) на размер дискового пространства, предоставленного пользователям;</font></li>
          <li><font face="Arial, Helvetica, sans-serif" size="2">проецировать 
            любой каталог (как на локальном, так и на удаленном компьютере) в 
            подкаталог на локальном диске.</font></li>
        </ul>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Интересной 
          возможностью новой версии Windows NT является динамическое шифрование 
          файлов и каталогов, повышающее надежность хранения информации. В состав 
          Windows NT 5.0 входит файловая система с шифрованием (<em>Encrypting 
          File System, EFS</em>), использующая алгоритмы шифрования с общим ключом. 
          Если для файла установлен атрибут шифрования, то при обращении пользовательской 
          программы к файлу для записи или чтения происходит прозрачное для программы 
          кодирование и декодирование файла.</font></p>
        <h5><font face="Arial, Helvetica, sans-serif" size="2"><b>UFS (Unix File 
          System)</b></font></h5>
        <p><font face="Arial, Helvetica, sans-serif" size="2">Так же, как Unix 
          представляет не одну систему, а ряд совместимых, так же UFS - не одна 
          система, а целый ряд. Информации о поддержке разными Unix'ами чужих 
          UFS у меня пока нет; информацию по поводу поддержки чужих файловых систем 
          для каждого конкретного Unix'а скорее всего можно найти в документации 
          к программе '<tt>mount</tt>'. </font></p>
        <p><font face="Arial, Helvetica, sans-serif" size="2">Основным отличием 
          UFS от других известных мне систем является выделение атрибутов файла 
          в отдельном объекте файловой системе - inode; это позволяет иметь доступ 
          к файлу (к набору данных, хранящихся в файле) более чем по одному имени 
          (так называемый жесткий линк; см.ниже), а заодно повысить эффективность 
          функционирования системы. </font></p>
        <p><font face="Arial, Helvetica, sans-serif" size="2">Классическая UFS 
          Отводит на файл 16 байт - 14-буквенное имя файла и двухбайтный номер 
          inode; современые UFS позволяют создавать длинные имена (до 255 символов), 
          а имена файлов хранят не подряд, а более разумно - в двоичном дереве 
          или hash-таблице, а номер inode может быть любым - четырехбайтным или 
          восьмибайтным. </font></p>
        <p><font face="Arial, Helvetica, sans-serif" size="2">Сам блок inode содержит: 
          </font> 
        <ul>
          <li><font face="Arial, Helvetica, sans-serif" size="2">количество ссылок 
            на файл - каждое имя, ссылающееся на файл, а также открытие файла 
            увеличивают этот счетчик на единицу; файл стирается с высвобождением 
            занятого места как только счетчик становится равным нулю (т.е. можно 
            стереть открытый файл, а реально он сотрется когда его закроют); </font> 
          <li><font face="Arial, Helvetica, sans-serif" size="2">размер файла; 
            </font> 
          <li><font face="Arial, Helvetica, sans-serif" size="2">дату и время 
            создания, последнего изменения и последего чтения файла; </font> 
          <li><font face="Arial, Helvetica, sans-serif" size="2">тип файла - в 
            Unix это бывает: </font> 
            <ul>
              <li><font face="Arial, Helvetica, sans-serif" size="2">обычный файл; 
                </font> 
              <li><font face="Arial, Helvetica, sans-serif" size="2">директория; 
                </font> 
              <li><font face="Arial, Helvetica, sans-serif" size="2">файл блочного 
                устройства; </font> 
              <li><font face="Arial, Helvetica, sans-serif" size="2">файл символьного 
                (последовательного) устройства; </font> 
              <li><font face="Arial, Helvetica, sans-serif" size="2">поименованный 
                пайп (название происходит от символа "<tt>|</tt>", называемого 
                "pipe" - см.его значение в shell); </font> 
              <li><font face="Arial, Helvetica, sans-serif" size="2">символьный 
                линк (алиас); </font> 
                <dt><font face="Arial, Helvetica, sans-serif" size="2">обычный 
                  файл и директория встречаются во всех файловых системах; файлы 
                  устройств являются интерфейсами к драйверам этих устройств; 
                  </font></dt>
              </li>
            </ul>
          <li><font face="Arial, Helvetica, sans-serif" size="2">UID (идентификатор 
            хозяина файла) и GID (идентификатор группы); </font> 
          <li><font face="Arial, Helvetica, sans-serif" size="2">атрибуты доступа: 
            </font> 
            <ul>
              <li><font face="Arial, Helvetica, sans-serif" size="2">Unix использует 
                атрибуты 'Read', 'Write' и 'eXecute' для хозяина файла (owner), 
                для одногрупника (group) и для остальных (other) - итого 9 бит; 
                для директории эти атрибуты означают соответственно права на чтение 
                списка файлов, на создание/удаление файлов и на обращение к файлам 
                внутри директории; </font> 
                <dd><font face="Arial, Helvetica, sans-serif" size="2">важной 
                  особенностью является то, что права доступа для хозяина определяются 
                  атрибутами для него, права для одногрупника и остальных для 
                  хозяина игнорируются; аналогично для одногркпника не играют 
                  никакой роли права для остальных; </font></dd>
              <li><font face="Arial, Helvetica, sans-serif" size="2">кроме них 
                есть атрибуты SetUID и SetGID - для запускаемого файла (не интерпретируемого) 
                эти атрибуты определяют запуск процесса под правами не запустившего 
                их пользователя, а хозяина и/или группы файла соотвнтственно; 
                </font> 
              <li><font face="Arial, Helvetica, sans-serif" size="2">и еще есть 
                один атрибут - для директории он запрещает стирание файлов, не 
                принадлежащих стирающему; </font></li>
            </ul>
          <li><font face="Arial, Helvetica, sans-serif" size="2">расширенный ACL 
            (Access Control List, Список Управления Доступом) или ссылку на ACL, 
            если файловая система поддерживает ACL; </font> 
          <li><font face="Arial, Helvetica, sans-serif" size="2">несколько (в 
            классической UFS - 13) ссылок на кластеры файловой системы <small>(раскладка 
            приведена для классической UFS)</small>: </font> 
            <ul>
              <li><font face="Arial, Helvetica, sans-serif" size="2">первые 10 
                указывают на первые 10 кластеров файла; </font> 
              <li><font face="Arial, Helvetica, sans-serif" size="2">11-й указывает 
                на кластер, содержащий адреса следующих 128-ми кластеров файла 
                (в классической UFS размер кластера - полкилобайта, а адрес кластера 
                - четыре байта); </font> 
              <li><font face="Arial, Helvetica, sans-serif" size="2">12-й указывает 
                на кластер, содержащий адреса 128-ми кластеров, в свою очередь 
                содержащих адреса следующих 16`384-рех кластеров файла; </font> 
              <li><font face="Arial, Helvetica, sans-serif" size="2">последний 
                указывает на кластер, ... вобщем, здесь используется еще на один 
                уровень больше, что позволяет адресовать еще 2`097`152 кластера 
                файла; </font> 
                <dd><font face="Arial, Helvetica, sans-serif" size="2">итого получается 
                  2`113`674 кластера по полкилобайта - чуть более гигабайта в 
                  файловой системе, способной работать с томами до двух терабайт 
                  (2<sup>^32</sup> кластеров по полкилобайта). </font> 
                <dd><font face="Arial, Helvetica, sans-serif" size="2">В современных 
                  UFS многое изменено: можно задавать произвольный размер кластера 
                  и использовать 64-битные указатели, так что ограничени классической 
                  UFS давно преодолены. Основное преимущество такой адресации 
                  в том, что маленькие файлы, к которым часто обращаются, достижимы 
                  прямо из inode, и так же быстро происходит обращение к началу 
                  большого файла; обращение в середину и конец большого файла 
                  происходят медленнее, чем в начало, но я не представляю, как 
                  можно обеспечить бОльшую скорость, не налагая жесткого требования 
                  заведомой дефрагментированности файла или хотя бы таблицы размещения 
                  его кластеров. </font></dd>
              </li>
            </ul>
          </li>
        </ul>
        <p></p>
        <p><font face="Arial, Helvetica, sans-serif" size="2">Во многих UFS если 
          после создания файла в кластер ничего не писалось (например, после открытия 
          файла переместили указатель далеко-далеко и что-то туда записали), то 
          под этот кластер не отводится место, а ссылке, которая должна на него 
          указывать, присваивается <tt>0</tt> (это особенно актуально в свете 
          использования hash-таблиц, которые обычно имеют внутри себя пустое пространство). 
          То же самое делается если кластер оказывается заполнен нулями (незаполненное 
          место считается залитым нулями, хотя полагаться на это программисту 
          я бы не советовал). По-моему, неплохой способ экономии места. </font></p>
        <p><font face="Arial, Helvetica, sans-serif" size="2">Часть систем UFS 
          реализованы как отказоустойчивые с журналированием, а часть по традиции 
          обходится без этого - считается, что если на машине хранятся действительно 
          важные данные, то эту машину можно обеспечить бесперебойным питанием 
          и не подпускать к ней ламеров. </font></p>
        <h5><font face="Arial, Helvetica, sans-serif" size="2">NetWare</font></h5>
        <p><font face="Arial, Helvetica, sans-serif" size="2">Сведений об устройстве 
          файловой системы NetWare у мня нет - знаю лишь, что она какая-то своя, 
          естественно, более эффективная, чем FAT, и имеет более сложные ACL, 
          чем классический Unix с его 'rwx' для owner, group и other. </font></p>
        <h5 align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2"><a name="Заключение">Заключение</a></font></h5>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Развитие 
          файловых систем персональных компьютеров определялось двумя факторами&nbsp;- 
          появлением новых стандартов на носители информации и ростом требований 
          к характеристикам файловой системы со стороны прикладных программ (разграничение 
          уровней доступа, поддержка длинных имен файлов в формате UNICODE). Первоначально, 
          для файловых систем первостепенное значение имело увеличение скорости 
          доступа к данным и минимизация объема хранимой служебной информации. 
          Впоследствии с появлением более быстрых жестких дисков и увеличением 
          их объемов, на первый план вышло требование надежности хранения информации, 
          которое привело к необходимости избыточного хранения данных.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Эволюция 
          файловой системы была напрямую связана с развитием технологий реляционных 
          баз данных. Файловая система использовала последние достижения, разработанные 
          для применения в СУБД: механизмы транзакций, защиты данных, систему 
          самовосстановления в результате сбоя.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Развитие 
          файловых систем привело к изменению самого понятия &quot;файл&quot; 
          от первоначального толкования как упорядоченная последовательность логических 
          записей, до понятия файла, как объекта, имеющего набор характеризующих 
          его атрибутов (включая имя файла, его псевдоним, время создания и собственно 
          данные), реализованного в <a href="#ntfs">ntfs</a>.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">За 
          свою 20 летнюю историю файловая система прошла путь от простой системы, 
          взявшей на себя функции управления файлами, до системы, представляющей 
          собой полноценную СУБД, обладающую встроенным механизмом протоколирования 
          и восстановления данных.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">В 
          отличие от попыток ввести стандарт на протокол, описывающий правила 
          доступа к удаленным файловым системам (CIFS, NFS), не стоит ожидать 
          появления подобного стандарта, описывающего файловые системы для жестких 
          дисков. Это можно объяснить тем, что файловая система жестких дисков 
          все еще продолжает оставаться одной из главных частей операционной системы, 
          влияющей на ее производительность. Поэтому каждый производитель операционных 
          систем будет стремиться использовать файловую систему, &quot;родную&quot; 
          для его ОС.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2">Дальнейшая 
          эволюция файловых систем пойдет по пути совершенствования механизмов 
          хранения данных, оптимизации хранения мультимедийных данных, использования 
          новых технологий, применяемых в базах данных (возможность полнотекстового 
          поиска, сортировка файлов по различным атрибутам).</font></p>
        <hr>
        <p align="JUSTIFY"> <font face="Arial, Helvetica, sans-serif" size="2"><a name="note1">1.&nbsp; 
          </a>В Windows 95 имеется возможность запретить появление тильды в псевдониме 
          вновь создаваемого файла (т.е. для файла LongFileName.ext имя в формате 
          8.3 будет не LongFi~1.ext, а LongFile.ext). Для этого в разделе HKEY_Local_Machine\System\CurrentControlSet\Control\FileSystem 
          нужно установить значение параметра NameNumericTail типа DWORD равным 
          0.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2"><a name="note2">2.</a> 
          В Windows NT можно отключить создание псевдонимов для длинных имен файлов, 
          путем установки значения параметра NtfsDisable8dot3NameCreation типа 
          DWORD в разделе HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\FileSystem 
          равным 1.</font></p>
        <p align="JUSTIFY"><font face="Arial, Helvetica, sans-serif" size="2"><a name="note3">3. 
          </a>ntfs версии 5.0 несовместима с предыдущей версией, для преобразования 
          дискового раздела версии 4.0 в новую версию необходимо воспользоваться 
          утилитой CHKntfs.</font></p>
        <p class="PrintDate" align="center">&nbsp;</p>
        </blockquote>
    </td>
  </tr>
  <tr> 
    <td width="160" background="../images/grad_hor.gif" class="LeftMenu" valign="top" bgcolor="#FFFFFF"><img src="../images/grad_htb.gif" width="160" height="15"></td>
    <td class="LeftMenu" valign="middle" bgcolor="#FFFFFF" width="10"><img src="../images/tube_crs.gif" width="14" height="19"></td>
    <td background="../images/grad_tub.gif" colspan="2" valign="top">&nbsp;</td>
  </tr>
  <tr> 
    <td width="160" background="../images/grad_hor.gif" class="LeftMenu" valign="top" bgcolor="#FFFFFF" height="30">&nbsp;</td>
    <td background="../images/tube_ver.gif" class="LeftMenu" valign="top" bgcolor="#FFFFFF" width="10" height="30">&nbsp;</td>
    <td bgcolor="#FFFFFF" colspan="2" valign="middle" height="30"> 
      <div align="right">
        <p><b><font face="Arial, Helvetica, sans-serif"><span class="LeftMenu"><a href="../recovery/1_first.htm">Восстановление</a>&nbsp;&nbsp; 
          </span></font></b><span class="LeftMenu"><b><font face="Arial, Helvetica, sans-serif"><a href="../index.htm">Справочная</a>&nbsp;&nbsp;</font></b> 
          <b><font face="Arial, Helvetica, sans-serif"><a href="../programs/index.htm">Программы</a>&nbsp;&nbsp;</font></b> 
          <b><font face="Arial, Helvetica, sans-serif"><a href="../links/index.htm">Ссылки</a>&nbsp;&nbsp; 
          <a href="../help/index.htm">Помощь</a></font></b></span></p>
      </div>
    </td>
  </tr>
</table>
</body>
</html>
